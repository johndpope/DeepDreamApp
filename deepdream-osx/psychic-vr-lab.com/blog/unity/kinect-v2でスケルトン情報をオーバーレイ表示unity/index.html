	<!doctype html>
	<!--[if !IE]>
	<html class="no-js non-ie" lang="ja"> <![endif]-->
	<!--[if IE 7 ]>
	<html class="no-js ie7" lang="ja"> <![endif]-->
	<!--[if IE 8 ]>
	<html class="no-js ie8" lang="ja"> <![endif]-->
	<!--[if IE 9 ]>
	<html class="no-js ie9" lang="ja"> <![endif]-->
	<!--[if gt IE 9]><!-->
<html class="no-js" lang="ja"> <!--<![endif]-->
	<head>

		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Kinect v2でスケルトン情報をオーバーレイ表示 | Psychic VRラボの殴り書き</title>

		<link rel="profile" href="http://gmpg.org/xfn/11"/>
		<link rel="pingback" href="../../xmlrpc.php"/>

		
<!-- All in One SEO Pack 2.2.6.2 by Michael Torbert of Semper Fi Web Design[481,533] -->
<meta name="description" itemprop="description" content="Kinect v2を使って骨格情報を取得し、実映像に重ねて表示するためのUnityスクリプトを公開。Kinectカメラで取得された画像情報を元に生成されたSkeleton情報をずれないようにオーバーレイ表示します。" />

<meta name="keywords" itemprop="keywords" content="born,skeleton,kinect,unity" />

<link rel="canonical" href="index.html" />
<!-- /all in one seo pack -->
<link rel="alternate" type="application/rss+xml" title="Psychic VRラボの殴り書き &raquo; フィード" href="../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Psychic VRラボの殴り書き &raquo; コメントフィード" href="../../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Psychic VRラボの殴り書き &raquo; Kinect v2でスケルトン情報をオーバーレイ表示する方法(Unity) のコメントのフィード" href="feed/index.html" />
<link rel='stylesheet' id='crayon-css'  href='../../wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min-ver=2.7.1.css' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='../../wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic-ver=2.7.1.css' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='../../wp-content/plugins/crayon-syntax-highlighter/fonts/monaco-ver=2.7.1.css' type='text/css' media='all' />
<link rel='stylesheet' id='addtofeedly-style-css'  href='../../wp-content/plugins/add-to-feedly/style-ver=4.1.5.css' type='text/css' media='all' />
<link rel='stylesheet' id='contact-form-7-css'  href='../../wp-content/plugins/contact-form-7/includes/css/styles-ver=4.1.2.css' type='text/css' media='all' />
<link rel='stylesheet' id='responsive-style-css'  href='../../wp-content/themes/responsive/core/css/style-ver=1.9.7.6.css' type='text/css' media='all' />
<link rel='stylesheet' id='responsive-media-queries-css'  href='../../wp-content/themes/responsive/core/css/responsive-ver=1.9.7.6.css' type='text/css' media='all' />
<link rel='stylesheet' id='wptt_front-css'  href='../../wp-content/plugins/wp-twitter-feeds/css/admin_style.min-ver=4.1.5.css' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='../../wp-content/plugins/jetpack/css/jetpack-ver=3.5.3.css' type='text/css' media='all' />
<!-- This site uses the Google Analytics by Yoast plugin v5.4.2 - Universal disabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">

	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-63550884-1']);
	_gaq.push(['_gat._forceSSL']);
	_gaq.push(['_trackPageview']);

	(function () {
		var ga = document.createElement('script');
		ga.type = 'text/javascript';
		ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(ga, s);
	})();

</script>
<!-- / Google Analytics by Yoast -->
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-ver=1.11.1.js'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-migrate.min-ver=1.2.1.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.7.1","is_admin":"0","ajaxurl":"http:\/\/psychic-vr-lab.com\/blog\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"\u8cbc\u308a\u4ed8\u3051\u306b\u30b3\u30d4\u30fc\u3001%s\u306b%s\u3092\u62bc\u3057\u3066\u3001","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min-ver=2.7.1.js'></script>
<script type='text/javascript' src='../../wp-content/plugins/add-to-feedly/js/jquery-1.10.2.min-ver=4.1.5.js'></script>
<script type='text/javascript' src='../../wp-content/plugins/add-to-feedly/js/scripts-ver=4.1.5.js'></script>
<script type='text/javascript' src='../../wp-content/themes/responsive/core/js/responsive-modernizr.min-ver=2.6.1.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php-rsd.xml" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='MIDIコントローラーNanoKONTROL2をUnityアナログ入力デバイスとして利用する' href='../midiコントローラーnanokontrol2をunityアナログ入力デバイスと/index.html' />
<link rel='next' title='Oculusかぶっている人の映像を外部の人と共有する(OVRMirrorの利用)' href='../oculusかぶっている人の映像を外部の人と共有するovrmirror/index.html' />
<meta name="generator" content="WordPress 4.1.5" />
<link rel='shortlink' href='http://wp.me/p5hcgk-6E' />
<script type="text/javascript">
	window._wp_rp_static_base_url = 'https://wprp.zemanta.com/static/';
	window._wp_rp_wp_ajax_url = "http://psychic-vr-lab.com/blog/wp-admin/admin-ajax.php";
	window._wp_rp_plugin_version = '3.5.4';
	window._wp_rp_post_id = '412';
	window._wp_rp_num_rel_posts = '6';
	window._wp_rp_thumbnails = true;
	window._wp_rp_post_title = 'Kinect+v2%E3%81%A7%E3%82%B9%E3%82%B1%E3%83%AB%E3%83%88%E3%83%B3%E6%83%85%E5%A0%B1%E3%82%92%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%AC%E3%82%A4%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95%28Unity%29';
	window._wp_rp_post_tags = ['unity', 'kinect', 'start', 'class', 'kinect', 'public', 'privat', 'call', 'updat', 'v2', 'null', 'sensor', 'a', 'manag'];
	window._wp_rp_promoted_content = true;
</script>
<script type="text/javascript" src="https://wprp.zemanta.com/static/js/loader.js?version=3.5.4" async></script>
<link rel="stylesheet" href="../../wp-content/plugins/wordpress-23-related-posts-plugin/static/themes/vertical-m-version=3.5.4.css" />
<style type='text/css'>img#wpstats{display:none}</style><!-- We need this for debugging -->
<!-- Responsive 1.9.7.6 -->
	</head>

<body class="single single-post postid-412 single-format-standard">

<div id="container" class="hfeed">

	<div class="skip-container cf">
		<a class="skip-link screen-reader-text focusable" href="index.html#content">&darr; Skip to Main Content</a>
	</div><!-- .skip-container -->
	<div id="header">

		
		
		
		
		
			<div id="logo">
				<span class="site-name"><a href="../../index.html" title="Psychic VRラボの殴り書き" rel="home">Psychic VRラボの殴り書き</a></span>
				<span class="site-description">Unity, Oculus rift, Leap motion, Kinect技術メモ</span>
			</div><!-- end of #logo -->

		
				<div class="main-nav"><ul class="menu"><li ><a href="../../index.html">ホーム</a></li></ul>
</div>
		
		
	</div><!-- end of #header -->

	<div id="wrapper" class="clearfix">

<div id="content" class="grid col-620">

	<span class="breadcrumb" typeof="v:Breadcrumb"><!-- Breadcrumb NavXT 5.2.1 -->
<span typeof="v:Breadcrumb"><a rel="v:url" property="v:title" title="Go to Psychic VRラボの殴り書き." href="../../index.html" class="home">開発入門</a></span> &gt; <span typeof="v:Breadcrumb"><a rel="v:url" property="v:title" title="Go to the Unity category archives." href="../../category/unity/index.html" class="taxonomy category">Unity</a></span> &gt; <span typeof="v:Breadcrumb"><a rel="v:url" property="v:title" title="Go to the Kinect category archives." href="../../category/unity/kinect/index.html" class="taxonomy category">Kinect</a></span> &gt; <span typeof="v:Breadcrumb"><span property="v:title">Kinect v2でスケルトン情報をオーバーレイ表示する方法(Unity)</span></span></span>
	
		
						<div id="post-412" class="post-412 post type-post status-publish format-standard hentry category-kinect category-unity">
				
				
	<h1 class="entry-title post-title">Kinect v2でスケルトン情報をオーバーレイ表示する方法(Unity)</h1>

<div class="post-meta">
	<span class="meta-prep meta-prep-author posted">投稿日: </span><a href="index.html" title="Kinect v2でスケルトン情報をオーバーレイ表示する方法(Unity)" rel="bookmark"><time class="timestamp updated" datetime="2015-03-30T22:51:34+00:00">2015年3月30日</time></a><span class="byline"> 作成者: </span><span class="author vcard"><a class="url fn n" href="../../author/from2001/index.html" title="from2001 の投稿をすべて表示">from2001</a></span>
			<span class="comments-link">
		<span class="mdash">&mdash;</span>
			<a href="index.html#respond" title="Comment on Kinect v2でスケルトン情報をオーバーレイ表示する方法(Unity)">コメントはありません &darr;</a>		</span>
	</div><!-- end of .post-meta -->

				<div class="post-entry">
					<p><a href="../../wp-content/uploads/2015/03/002.gif"><img class="alignnone size-full wp-image-436" src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/03/002.gif" alt="002" width="1500" height="1000" /><noscript><img class="alignnone size-full wp-image-436" src="../../wp-content/uploads/2015/03/002.gif" alt="002" width="1500" height="1000" /></noscript></a></p>
<p>Unity上で、Kinect v2カメラを使って取得したカラー映像に、スケルトン（骨格情報）を重ねて表示する方法を紹介します。使いまわしやすいUnity用コードがネット上に見つからなかったので作成したので公開しておきます。</p>
<p>Kinect v2 with MS-SDKアセットには何かと便利な機能が揃っているので、このアセットをベースに開発を行うことにします。ただし、スケルトンをオーバーレイ表示する機能が存在しないため、その部分だけ自作して利用することにしました。</p>
<p><span id="more-412"></span></p>
<p><img class="alignnone size-full wp-image-413" src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/03/kinect.jpg" alt="kinect" width="600" height="450" /><noscript><img class="alignnone size-full wp-image-413" src="../../wp-content/uploads/2015/03/kinect.jpg" alt="kinect" width="600" height="450" /></noscript></p>
<p>まずは、<a href="https://www.assetstore.unity3d.com/en/#!/content/18708" target="_blank">Kinect v2 with MS-SDKアセット（20ドル）</a>を購入しインポートします。</p>
<p>スケルトンを描画する用のスクリプトを用意しましたので、新規にc#スクリプトを作成しコピペします。スクリプト名をKinectSkeletonOverlay_Psychic.csとしておきましょう。</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-559d950edc12e691806454" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">KinectSkeletonOverlay_Psychic.cs</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="行番号ON/OFF"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="ハイライト表示ON/OFF"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="新しいウィンドウでコードを開く"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
using UnityEngine;
using System.Collections;
using System;
using System.Collections.Generic;
using Windows.Kinect;

public class KinectSkeletonOverlay_Psychic : MonoBehaviour {

    public GUITexture displayGui;      //スケルトン表示用

    private Texture2D displayTexture;
    private KinectInterop.BodyData bodyData;
    private KinectInterop.SensorData sensorData = null;
    private KinectSensor _sensor;


	// Use this for initialization
	void Start () {
        _sensor = KinectSensor.GetDefault();
        displayTexture = new Texture2D(1920,1080);
	}
	
	// Update is called once per frame
	void Update () {

        //Kinectマネージャーのインスタンスを取得
        KinectManager manager = KinectManager.Instance;

        //カラーマップ取得（カメラ撮影のカラー画像）
        if (displayGui &amp;&amp; (displayGui.texture == null))
        {
            displayTexture = manager.GetUsersClrTex();
        }

        //センサーデータをDrawSkeleton2関数内で利用できるように取得しておく
        sensorData = manager.GetSensorData();
        //人数分ループ
        for (int i = 0; i &lt; manager.GetUsersCount(); i++)
        {
            bodyData = manager.GetUserBodyData(manager.GetUserIdByIndex(i)); 
            DrawSkeleton2(displayTexture, ref bodyData);
            displayTexture.Apply();
        }
        displayGui.texture = displayTexture;
	}


    //指定のテクスチャにスケルトンを追加描画
    private void DrawSkeleton2(Texture2D aTexture, ref KinectInterop.BodyData bodyData)
    {
     
        //関節でループ
        int jointsCount = sensorData.jointCount;
        for (int i = 0; i &lt; jointsCount; i++)
        {
            int parent = (int)sensorData.sensorInterface.GetParentJoint((KinectInterop.JointType)i);

            if (bodyData.joint[i].trackingState != KinectInterop.TrackingState.NotTracked &amp;&amp;
               bodyData.joint[parent].trackingState != KinectInterop.TrackingState.NotTracked)
            {

                //3次元座標をカラーマップ座標に変換
                //CamraSpacePointはメートル座標
                //ColorSpacePointはカラーマップ(フルHD)座標
                CameraSpacePoint posParent_cameraSpace = new CameraSpacePoint();
                posParent_cameraSpace.X = bodyData.joint[parent].kinectPos.x;
                posParent_cameraSpace.Y = bodyData.joint[parent].kinectPos.y;
                posParent_cameraSpace.Z = bodyData.joint[parent].kinectPos.z;
                ColorSpacePoint posParent_colorPoint = _sensor.CoordinateMapper.MapCameraPointToColorSpace(posParent_cameraSpace);
                Vector2 posParent = new Vector2(posParent_colorPoint.X, posParent_colorPoint.Y);

                CameraSpacePoint posJoint_cameraSpace = new CameraSpacePoint();
                posJoint_cameraSpace.X = bodyData.joint[i].kinectPos.x;
                posJoint_cameraSpace.Y = bodyData.joint[i].kinectPos.y;
                posJoint_cameraSpace.Z = bodyData.joint[i].kinectPos.z;
                ColorSpacePoint posJoint_colorPoint = _sensor.CoordinateMapper.MapCameraPointToColorSpace(posJoint_cameraSpace);
                Vector2 posJoint = new Vector2(posJoint_colorPoint.X, posJoint_colorPoint.Y);


                if (posParent != Vector2.zero &amp;&amp; posJoint != Vector2.zero)
                {
                    //関節情報が飛んでる場合には骨を描画せず
                    if (float.IsInfinity(posParent.x)) { break; }
                    if (float.IsInfinity(posParent.y)) { break; }
                    if (float.IsInfinity(posJoint.x))  { break; }
                    if (float.IsInfinity(posJoint.y))  { break; }

                    //KinectInteropに用意されている機能を使い骨を描画
                    KinectInterop.DrawLine(aTexture, (int)posParent.x, (int)posParent.y, (int)posJoint.x, (int)posJoint.y, Color.yellow);
                }
            }
        }
    }
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-559d950edc12e691806454-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-2">2</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-4">4</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-6">6</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-8">8</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-10">10</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-12">12</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-14">14</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-16">16</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-18">18</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-20">20</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-22">22</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-24">24</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-26">26</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-28">28</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-30">30</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-32">32</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-34">34</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-36">36</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-38">38</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-40">40</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-42">42</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-44">44</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-46">46</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-48">48</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-50">50</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-52">52</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-54">54</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-56">56</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-58">58</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-60">60</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-62">62</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-64">64</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-66">66</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-68">68</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-70">70</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-72">72</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-74">74</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-76">76</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-78">78</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-80">80</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-82">82</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-84">84</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-86">86</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-88">88</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-90">90</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-92">92</div><div class="crayon-num" data-line="crayon-559d950edc12e691806454-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc12e691806454-94">94</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-559d950edc12e691806454-1"><span class="crayon-e">using </span><span class="crayon-v">UnityEngine</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-2"><span class="crayon-e">using </span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Collections</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-3"><span class="crayon-e">using </span><span class="crayon-v">System</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-4"><span class="crayon-e">using </span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Collections</span><span class="crayon-sy">.</span><span class="crayon-v">Generic</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-5"><span class="crayon-e">using </span><span class="crayon-v">Windows</span><span class="crayon-sy">.</span><span class="crayon-v">Kinect</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-6">&nbsp;</div><div class="crayon-line" id="crayon-559d950edc12e691806454-7"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">KinectSkeletonOverlay_Psychic</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">MonoBehaviour</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-8">&nbsp;</div><div class="crayon-line" id="crayon-559d950edc12e691806454-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">GUITexture </span><span class="crayon-v">displayGui</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//スケルトン表示用</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-10">&nbsp;</div><div class="crayon-line" id="crayon-559d950edc12e691806454-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">Texture2D </span><span class="crayon-v">displayTexture</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-v">KinectInterop</span><span class="crayon-sy">.</span><span class="crayon-e">BodyData </span><span class="crayon-v">bodyData</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-v">KinectInterop</span><span class="crayon-sy">.</span><span class="crayon-e">SensorData </span><span class="crayon-v">sensorData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">KinectSensor </span><span class="crayon-v">_sensor</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-16">&nbsp;</div><div class="crayon-line" id="crayon-559d950edc12e691806454-17"><span class="crayon-h">	</span><span class="crayon-c">// Use this for initialization</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-18"><span class="crayon-h">	</span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">Start</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">_sensor</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">KinectSensor</span><span class="crayon-sy">.</span><span class="crayon-e">GetDefault</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">displayTexture</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Texture2D</span><span class="crayon-sy">(</span><span class="crayon-cn">1920</span><span class="crayon-sy">,</span><span class="crayon-cn">1080</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-21"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-22"><span class="crayon-h">	</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-23"><span class="crayon-h">	</span><span class="crayon-c">// Update is called once per frame</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-24"><span class="crayon-h">	</span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">Update</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-25">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Kinectマネージャーのインスタンスを取得</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">KinectManager </span><span class="crayon-v">manager</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">KinectManager</span><span class="crayon-sy">.</span><span class="crayon-v">Instance</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-28">&nbsp;</div><div class="crayon-line" id="crayon-559d950edc12e691806454-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//カラーマップ取得（カメラ撮影のカラー画像）</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">displayGui</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">displayGui</span><span class="crayon-sy">.</span><span class="crayon-v">texture</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">displayTexture</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">manager</span><span class="crayon-sy">.</span><span class="crayon-e">GetUsersClrTex</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-34">&nbsp;</div><div class="crayon-line" id="crayon-559d950edc12e691806454-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//センサーデータをDrawSkeleton2関数内で利用できるように取得しておく</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">sensorData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">manager</span><span class="crayon-sy">.</span><span class="crayon-e">GetSensorData</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//人数分ループ</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">manager</span><span class="crayon-sy">.</span><span class="crayon-e">GetUsersCount</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">++</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">bodyData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">manager</span><span class="crayon-sy">.</span><span class="crayon-e">GetUserBodyData</span><span class="crayon-sy">(</span><span class="crayon-v">manager</span><span class="crayon-sy">.</span><span class="crayon-e">GetUserIdByIndex</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">DrawSkeleton2</span><span class="crayon-sy">(</span><span class="crayon-v">displayTexture</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">ref </span><span class="crayon-v">bodyData</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">displayTexture</span><span class="crayon-sy">.</span><span class="crayon-e">Apply</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">displayGui</span><span class="crayon-sy">.</span><span class="crayon-v">texture</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">displayTexture</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-45"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-46">&nbsp;</div><div class="crayon-line" id="crayon-559d950edc12e691806454-47">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//指定のテクスチャにスケルトンを追加描画</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">DrawSkeleton2</span><span class="crayon-sy">(</span><span class="crayon-e">Texture2D </span><span class="crayon-v">aTexture</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">ref </span><span class="crayon-v">KinectInterop</span><span class="crayon-sy">.</span><span class="crayon-e">BodyData </span><span class="crayon-v">bodyData</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//関節でループ</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">jointsCount</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">sensorData</span><span class="crayon-sy">.</span><span class="crayon-v">jointCount</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">jointsCount</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">++</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-r">parent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-v">sensorData</span><span class="crayon-sy">.</span><span class="crayon-v">sensorInterface</span><span class="crayon-sy">.</span><span class="crayon-e">GetParentJoint</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">KinectInterop</span><span class="crayon-sy">.</span><span class="crayon-v">JointType</span><span class="crayon-sy">)</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-57">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">bodyData</span><span class="crayon-sy">.</span><span class="crayon-v">joint</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">trackingState</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-v">KinectInterop</span><span class="crayon-sy">.</span><span class="crayon-v">TrackingState</span><span class="crayon-sy">.</span><span class="crayon-v">NotTracked</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">bodyData</span><span class="crayon-sy">.</span><span class="crayon-v">joint</span><span class="crayon-sy">[</span><span class="crayon-r">parent</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">trackingState</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-v">KinectInterop</span><span class="crayon-sy">.</span><span class="crayon-v">TrackingState</span><span class="crayon-sy">.</span><span class="crayon-v">NotTracked</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-61">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//3次元座標をカラーマップ座標に変換</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//CamraSpacePointはメートル座標</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//ColorSpacePointはカラーマップ(フルHD)座標</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">CameraSpacePoint </span><span class="crayon-v">posParent_cameraSpace</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">CameraSpacePoint</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">posParent_cameraSpace</span><span class="crayon-sy">.</span><span class="crayon-v">X</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">bodyData</span><span class="crayon-sy">.</span><span class="crayon-v">joint</span><span class="crayon-sy">[</span><span class="crayon-r">parent</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">kinectPos</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">posParent_cameraSpace</span><span class="crayon-sy">.</span><span class="crayon-v">Y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">bodyData</span><span class="crayon-sy">.</span><span class="crayon-v">joint</span><span class="crayon-sy">[</span><span class="crayon-r">parent</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">kinectPos</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">posParent_cameraSpace</span><span class="crayon-sy">.</span><span class="crayon-v">Z</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">bodyData</span><span class="crayon-sy">.</span><span class="crayon-v">joint</span><span class="crayon-sy">[</span><span class="crayon-r">parent</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">kinectPos</span><span class="crayon-sy">.</span><span class="crayon-v">z</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">ColorSpacePoint </span><span class="crayon-v">posParent_colorPoint</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">_sensor</span><span class="crayon-sy">.</span><span class="crayon-v">CoordinateMapper</span><span class="crayon-sy">.</span><span class="crayon-e">MapCameraPointToColorSpace</span><span class="crayon-sy">(</span><span class="crayon-v">posParent_cameraSpace</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Vector2 </span><span class="crayon-v">posParent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Vector2</span><span class="crayon-sy">(</span><span class="crayon-v">posParent_colorPoint</span><span class="crayon-sy">.</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">posParent_colorPoint</span><span class="crayon-sy">.</span><span class="crayon-v">Y</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-71">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">CameraSpacePoint </span><span class="crayon-v">posJoint_cameraSpace</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">CameraSpacePoint</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">posJoint_cameraSpace</span><span class="crayon-sy">.</span><span class="crayon-v">X</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">bodyData</span><span class="crayon-sy">.</span><span class="crayon-v">joint</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">kinectPos</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">posJoint_cameraSpace</span><span class="crayon-sy">.</span><span class="crayon-v">Y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">bodyData</span><span class="crayon-sy">.</span><span class="crayon-v">joint</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">kinectPos</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">posJoint_cameraSpace</span><span class="crayon-sy">.</span><span class="crayon-v">Z</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">bodyData</span><span class="crayon-sy">.</span><span class="crayon-v">joint</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">kinectPos</span><span class="crayon-sy">.</span><span class="crayon-v">z</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">ColorSpacePoint </span><span class="crayon-v">posJoint_colorPoint</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">_sensor</span><span class="crayon-sy">.</span><span class="crayon-v">CoordinateMapper</span><span class="crayon-sy">.</span><span class="crayon-e">MapCameraPointToColorSpace</span><span class="crayon-sy">(</span><span class="crayon-v">posJoint_cameraSpace</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Vector2 </span><span class="crayon-v">posJoint</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Vector2</span><span class="crayon-sy">(</span><span class="crayon-v">posJoint_colorPoint</span><span class="crayon-sy">.</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">posJoint_colorPoint</span><span class="crayon-sy">.</span><span class="crayon-v">Y</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-78">&nbsp;</div><div class="crayon-line" id="crayon-559d950edc12e691806454-79">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">posParent</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-v">Vector2</span><span class="crayon-sy">.</span><span class="crayon-v">zero</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-v">posJoint</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-v">Vector2</span><span class="crayon-sy">.</span><span class="crayon-v">zero</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//関節情報が飛んでる場合には骨を描画せず</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">float</span><span class="crayon-sy">.</span><span class="crayon-e">IsInfinity</span><span class="crayon-sy">(</span><span class="crayon-v">posParent</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-st">break</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">float</span><span class="crayon-sy">.</span><span class="crayon-e">IsInfinity</span><span class="crayon-sy">(</span><span class="crayon-v">posParent</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-st">break</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">float</span><span class="crayon-sy">.</span><span class="crayon-e">IsInfinity</span><span class="crayon-sy">(</span><span class="crayon-v">posJoint</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-st">break</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">float</span><span class="crayon-sy">.</span><span class="crayon-e">IsInfinity</span><span class="crayon-sy">(</span><span class="crayon-v">posJoint</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-st">break</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-87">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-88"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//KinectInteropに用意されている機能を使い骨を描画</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">KinectInterop</span><span class="crayon-sy">.</span><span class="crayon-e">DrawLine</span><span class="crayon-sy">(</span><span class="crayon-v">aTexture</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-v">posParent</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-v">posParent</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-v">posJoint</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-v">posJoint</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Color</span><span class="crayon-sy">.</span><span class="crayon-v">yellow</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-559d950edc12e691806454-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc12e691806454-94"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.1177 seconds] -->
<p>余談ですが、Kinect v2 with MS-SDKアセットにはDrawSkeletonという関数が用意されています。この関数は良く出来ていて、Depth情報を元に人以外の背景を切り抜いてくれたりするんですが、Depth情報を元にしているため画角が512&#215;424サイズのテクスチャとしてしか取得できなかったり、背景切り抜きをオフに出来なかったりと、少し使い勝手が悪かったりします。</p>
<p><a href="../../wp-content/uploads/2015/03/kinect1.png"><img class="alignnone size-full wp-image-415" src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/03/kinect1.png" alt="kinect1" width="184" height="177" /><noscript><img class="alignnone size-full wp-image-415" src="../../wp-content/uploads/2015/03/kinect1.png" alt="kinect1" width="184" height="177" /></noscript></a></p>
<p>メモ</p>
<p>bodyData.joint[i].kinectPos.xで取得できる座標はメートル単位のデータなので、これをカラーマップ座標系（1920&#215;1080）に変換する必要がある。<br />
変換に必要なMapCameraPointToColorSpace関数はKinect v2 with MS-SDKアセット内でラッパー関数が用意されていないので<br />
using Windows.Kinect;でKinectのSDKを呼び出し<br />
private KinectSensor _sensor;<br />
_sensor = KinectSensor.GetDefault();<br />
_sensor.CoordinateMapper.MapCameraPointToColorSpace()として利用する必要あり<br />
このあたりの処理をきっちりやらないとボーンが実際の映像とずれたりします。</p>
<p>続いて、下記を参考にシーンの準備をします。</p>
<p><a href="../../wp-content/uploads/2015/03/kinect-i1.png"><img class="alignnone size-full wp-image-416" src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/03/kinect-i1.png" alt="kinect-i1" width="866" height="984" /><noscript><img class="alignnone size-full wp-image-416" src="../../wp-content/uploads/2015/03/kinect-i1.png" alt="kinect-i1" width="866" height="984" /></noscript></a></p>
<p><a href="../../wp-content/uploads/2015/03/kinect-i2.png"><img class="alignnone size-full wp-image-417" src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/03/kinect-i2.png" alt="kinect-i2" width="865" height="265" /><noscript><img class="alignnone size-full wp-image-417" src="../../wp-content/uploads/2015/03/kinect-i2.png" alt="kinect-i2" width="865" height="265" /></noscript></a></p>
<p><a href="../../wp-content/uploads/2015/03/kinect-i3.png"><img class="alignnone size-full wp-image-418" src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/03/kinect-i3.png" alt="kinect-i3" width="869" height="364" /><noscript><img class="alignnone size-full wp-image-418" src="../../wp-content/uploads/2015/03/kinect-i3.png" alt="kinect-i3" width="869" height="364" /></noscript></a></p>
<p><a href="../../wp-content/uploads/2015/03/kinect-i4.png"><img class="alignnone size-full wp-image-419" src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/03/kinect-i4.png" alt="kinect-i4" width="866" height="468" /><noscript><img class="alignnone size-full wp-image-419" src="../../wp-content/uploads/2015/03/kinect-i4.png" alt="kinect-i4" width="866" height="468" /></noscript></a></p>
<p>&nbsp;</p>
<p>実行するとこんな感じでカラーマップ（カラー映像）にスケルトンのボーンがオーバーレイ描画されます。<br />
（散らかった部屋と、タイマー撮影の方法がわからず左手でPrintScreenを押してるのはご愛嬌）</p>
<p><a href="../../wp-content/uploads/2015/03/kinect2.png"><img class="alignnone size-full wp-image-420" src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/03/kinect2.png" alt="kinect2" width="1120" height="941" /><noscript><img class="alignnone size-full wp-image-420" src="../../wp-content/uploads/2015/03/kinect2.png" alt="kinect2" width="1120" height="941" /></noscript></a></p>
<p>・KinectSkeletonOverlay_Psychic.cs<br />
・テスト用のシーン<br />
・各種必要GameObject及び設定<br />
をまとめたPackageを作成しておきましたので公開しておきます。<br />
「Kinect v2withMS-SDKアセット」は含みませんので「Kinect v2withMS-SDKアセット」をインポートした後に下記パッケージをインポートして実行してください。</p>
<p><a href="../../wp-content/uploads/2015/01/UnityIcon.jpg"><img class="alignnone  wp-image-382" src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/01/UnityIcon.jpg" alt="UnityIcon" width="24" height="16" /><noscript><img class="alignnone  wp-image-382" src="../../wp-content/uploads/2015/01/UnityIcon.jpg" alt="UnityIcon" width="24" height="16" /></noscript></a><a href="https://www.dropbox.com/sh/tfrxxzh1nyfi1ma/AACvVq379JH3v_9daYNfj6r9a?dl=1" target="_blank">KinectV2SkeletonOverlay.unitypackage</a></p>
<p>&nbsp;</p>
<p>ついでに、Kinect v2withMS-SDKを利用して、スケルトンの3次元情報をそのままUnityの3D空間で利用する際のハマりどころの解説をしておきます。</p>
<p>Kinect v2withMS-SDKアセットは<a href="../続kinect-v2でユニティちゃんを動かす（kinect-v2withms-sdkアセット/index.html" target="_blank">[続]Kinect v2でユニティちゃんを動かす</a>で紹介したように、Kinectで取得した骨格情報をMechanimで利用することが簡単にできます。この機能は良く出来過ぎていて、下記の機能が実装されています。ホネホネ人間はCubemanといいます。</p>
<p><a href="../../wp-content/uploads/2015/03/kinect3.png"><img class="alignnone size-full wp-image-422" src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/03/kinect3.png" alt="kinect3" width="864" height="623" /><noscript><img class="alignnone size-full wp-image-422" src="../../wp-content/uploads/2015/03/kinect3.png" alt="kinect3" width="864" height="623" /></noscript></a></p>
<p>これは、非常に便利で有意義な機能なのですが、Kinectが取得した3次元情報をそのまま利用せずに、人体を認識した瞬間の場所をoffset情報として相対的な座標計算に用いています。1人分の情報しか利用しない場合はいいのですが、ふたり以上の人物の情報を同時に扱う場合はには、二人の各関節の場所が絶対座標ではなく、offsetを元に相対的な座標であるため問題が発生します。具体的には二人が手を合わせてたとしても、それぞれ別のoffsetが聞いていて、Cubemanの手が合いません。</p>
<p>CubemanController.csの163行目のoffset処理している箇所をコメントアウトすることでこの問題を回避することが可能です。</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-559d950edc155040933789" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">CubemanController.cs</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="行番号ON/OFF"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="ハイライト表示ON/OFF"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="新しいウィンドウでコードを開く"><div class="crayon-button-icon"></div></div><span class="crayon-language">C#</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
//CubemanController.cs
//163行目
//transform.position = initialPosOffset + (verticalMovement ? posPointMan : new Vector3(posPointMan.x, 0, posPointMan.z));
transform.position =  (verticalMovement ? posPointMan : new Vector3(posPointMan.x, 0, posPointMan.z));</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-559d950edc155040933789-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc155040933789-2">2</div><div class="crayon-num" data-line="crayon-559d950edc155040933789-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-559d950edc155040933789-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-559d950edc155040933789-1"><span class="crayon-c">//CubemanController.cs</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc155040933789-2"><span class="crayon-c">//163行目</span></div><div class="crayon-line" id="crayon-559d950edc155040933789-3"><span class="crayon-c">//transform.position = initialPosOffset + (verticalMovement ? posPointMan : new Vector3(posPointMan.x, 0, posPointMan.z));</span></div><div class="crayon-line crayon-striped-line" id="crayon-559d950edc155040933789-4"><span class="crayon-v">transform</span><span class="crayon-sy">.</span><span class="crayon-v">position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span> <span class="crayon-sy">(</span><span class="crayon-i">verticalMovement</span><span class="crayon-h"> </span><span class="crayon-sy">?</span><span class="crayon-h"> </span><span class="crayon-v">posPointMan</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Vector3</span><span class="crayon-sy">(</span><span class="crayon-v">posPointMan</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">posPointMan</span><span class="crayon-sy">.</span><span class="crayon-v">z</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0077 seconds] -->
<p><a href="../../wp-content/uploads/2015/03/kinect4.png"><img class="alignnone size-full wp-image-423" src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/03/kinect4.png" alt="kinect4" width="512" height="389" /><noscript><img class="alignnone size-full wp-image-423" src="../../wp-content/uploads/2015/03/kinect4.png" alt="kinect4" width="512" height="389" /></noscript></a></p>
<p>仲良く二人分のCubemanを表示することができるようになりました。</p>
<p>ただし、この処理をはずすことで、Kinectカメラの高さがCubemanの垂直方向の位置に影響をおよぼすようになるため、足が地面にめり込んだり宙に浮いたりするようになりますので、調整が必要になります。</p>

<div class="wp_rp_wrap  wp_rp_vertical_m" id="wp_rp_first"><div class="wp_rp_content"><h3 class="related_post_title">More from my site</h3><ul class="related_post wp_rp"><li data-position="0" data-poid="in-58" data-post-type="none" ><a href="../続kinect-v2でユニティちゃんを動かす（kinect-v2withms-sdkアセット/index.html" class="wp_rp_thumbnail"><img src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2014/11/A1-150x150.png" alt="[続]Kinect v2でユニティちゃんを動かす（Kinect v2withMS-SDKアセット）" width="150" height="150" /><noscript><img src="../../wp-content/uploads/2014/11/A1-150x150.png" alt="[続]Kinect v2でユニティちゃんを動かす（Kinect v2withMS-SDKアセット）" width="150" height="150" /></noscript></a><a href="../続kinect-v2でユニティちゃんを動かす（kinect-v2withms-sdkアセット/index.html" class="wp_rp_title">[続]Kinect v2でユニティちゃんを動かす（Kinect v2withMS-SDKアセット）</a></li><li data-position="1" data-poid="in-33" data-post-type="none" ><a href="../kinect-v2でユニティちゃんを動かす（kinect-v2withms-sdkアセット）/index.html" class="wp_rp_thumbnail"><img src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2014/10/sdk1-150x150.png" alt="Kinect v2でユニティちゃんを動かす（Kinect v2withMS-SDKアセット）" width="150" height="150" /><noscript><img src="../../wp-content/uploads/2014/10/sdk1-150x150.png" alt="Kinect v2でユニティちゃんを動かす（Kinect v2withMS-SDKアセット）" width="150" height="150" /></noscript></a><a href="../kinect-v2でユニティちゃんを動かす（kinect-v2withms-sdkアセット）/index.html" class="wp_rp_title">Kinect v2でユニティちゃんを動かす（Kinect v2withMS-SDKアセット）</a></li><li data-position="2" data-poid="in-210" data-post-type="none" ><a href="../360度カメラthetaで撮った写真をunityで使う/index.html" class="wp_rp_thumbnail"><img src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2014/11/Eye-150x150.png" alt="360度カメラTHETAで撮った写真・動画をUnityで使う" width="150" height="150" /><noscript><img src="../../wp-content/uploads/2014/11/Eye-150x150.png" alt="360度カメラTHETAで撮った写真・動画をUnityで使う" width="150" height="150" /></noscript></a><a href="../360度カメラthetaで撮った写真をunityで使う/index.html" class="wp_rp_title">360度カメラTHETAで撮った写真・動画をUnityで使う</a></li><li data-position="3" data-poid="in-96" data-post-type="none" ><a href="../ユニティちゃんcandy-rock-star-live-with-oculus/index.html" class="wp_rp_thumbnail"><img src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2014/11/あなただけ-150x150.png" alt="あなただけのために見つめて歌ってくれるユニティちゃんCandy Rock Starライブの作り方 with Oculus" width="150" height="150" /><noscript><img src="http://psychic-vr-lab.com/blog/wp-content/uploads/2014/11/%E3%81%82%E3%81%AA%E3%81%9F%E3%81%A0%E3%81%91-150x150.png" alt="あなただけのために見つめて歌ってくれるユニティちゃんCandy Rock Starライブの作り方 with Oculus" width="150" height="150" /></noscript></a><a href="../ユニティちゃんcandy-rock-star-live-with-oculus/index.html" class="wp_rp_title">あなただけのために見つめて歌ってくれるユニティちゃんCandy Rock Starライブの作り方 with Oculus</a></li><li data-position="4" data-poid="in-534" data-post-type="none" ><a href="../unityでgear-vr用パススルーカメラアプリの作り方/index.html" class="wp_rp_thumbnail"><img src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/05/PassThrough01-150x150.png" alt="UnityでGear VR用パススルーカメラアプリの作り方" width="150" height="150" /><noscript><img src="../../wp-content/uploads/2015/05/PassThrough01-150x150.png" alt="UnityでGear VR用パススルーカメラアプリの作り方" width="150" height="150" /></noscript></a><a href="../unityでgear-vr用パススルーカメラアプリの作り方/index.html" class="wp_rp_title">UnityでGear VR用パススルーカメラアプリの作り方</a></li><li data-position="5" data-poid="in-341" data-post-type="none" ><a href="../viaual-itween-path-editorで自由なカメラワーク/index.html" class="wp_rp_thumbnail"><img src="../../wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://psychic-vr-lab.com/blog/wp-content/uploads/2015/01/iTween4-150x150.png" alt="Visual iTween Path Editorで視点もポジションも自由に移動するカメラワーク" width="150" height="150" /><noscript><img src="../../wp-content/uploads/2015/01/iTween4-150x150.png" alt="Visual iTween Path Editorで視点もポジションも自由に移動するカメラワーク" width="150" height="150" /></noscript></a><a href="../viaual-itween-path-editorで自由なカメラワーク/index.html" class="wp_rp_title">Visual iTween Path Editorで視点もポジションも自由に移動するカメラワーク</a></li></ul></div></div>

					
									</div><!-- end of .post-entry -->

				<div class="navigation">
					<div class="previous">&#8249; <a href="../midiコントローラーnanokontrol2をunityアナログ入力デバイスと/index.html" rel="prev">MIDIコントローラーNanoKONTROL2をUnityアナログ入力デバイスとして利用する</a></div>
					<div class="next"><a href="../oculusかぶっている人の映像を外部の人と共有するovrmirror/index.html" rel="next">Oculusかぶっている人の映像を外部の人と共有する(OVRMirrorの利用)</a> &#8250;</div>
				</div><!-- end of .navigation -->

				

	<div class="post-data">
		カテゴリー: <a href="../../category/unity/kinect/index.html">Kinect</a>, <a href="../../category/unity/index.html">Unity</a>			</div><!-- end of .post-data -->


<div class="post-edit"></div>
							</div><!-- end of #post-412 -->
			
						




									<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">コメントを残す <small><a rel="nofollow" id="cancel-comment-reply-link" href="index.html#respond" style="display:none;">コメントをキャンセル</a></small></h3>
									<form action="http://psychic-vr-lab.com/blog/wp-comments-post.php" method="post" id="commentform" class="comment-form">
																			<p class="comment-notes"><span id="email-notes">メールアドレスが公開されることはありません。</span></p>							<p class="comment-form-author"><label for="author">名前</label> <input id="author" name="author" type="text" value="" size="30" /></p>
<p class="comment-form-email"><label for="email">メールアドレス</label> <input id="email" name="email" type="text" value="" size="30" /></p>
<p class="comment-form-url"><label for="url">ウェブサイト</label><input id="url" name="url" type="text" value="" size="30" /></p>
												<p class="comment-form-comment"><label for="comment">コメント</label> <textarea id="comment" name="comment" cols="45" rows="8" aria-describedby="form-allowed-tags" aria-required="true"></textarea></p>						<p class="form-allowed-tags" id="form-allowed-tags">次の<abbr title="HyperText Markup Language">HTML</abbr> タグと属性が使えます:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code class=&quot;&quot; title=&quot;&quot; data-url=&quot;&quot;&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; &lt;pre class=&quot;&quot; title=&quot;&quot; data-url=&quot;&quot;&gt; &lt;span class=&quot;&quot; title=&quot;&quot; data-url=&quot;&quot;&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" class="submit" value="コメントを送信" />
							<input type='hidden' name='comment_post_ID' value='412' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
						<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="ffe33bdf3b" /></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_comments" id="subscribe_comments" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-label" for="subscribe_comments">新しいコメントをメールで通知</label></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog">新しい投稿をメールで受け取る</label></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="32"/></p>					</form>
							</div><!-- #respond -->
			

			
		
</div><!-- end of #content -->


	<div id="widgets" class="grid col-300 fit">
		
		<div id="text-9" class="widget-wrapper widget_text"><div class="widget-title"><h3>リンク</h3></div>			<div class="textwidget"><a href="../../../index.html">Psychic VR Lab本サイト</a>へ戻る</div>
		</div><div id="text-2" class="widget-wrapper widget_text"><div class="widget-title"><h3>Twitter(from2001vr)</h3></div>			<div class="textwidget"><a class="twitter-timeline" href="https://twitter.com/from2001vr" data-widget-id="530621992806805504">@from2001vr からのツイート</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

</div>
		</div><div id="search-2" class="widget-wrapper widget_search"><form method="get" id="searchform" action="http://psychic-vr-lab.com/blog/">
	<label class="screen-reader-text" for="s">Search for:</label>
	<input type="text" class="field" name="s" id="s" placeholder="検索&hellip;" />
	<input type="submit" class="submit" name="submit" id="searchsubmit" value="Go" />
</form></div>		<div id="recent-posts-2" class="widget-wrapper widget_recent_entries">		<div class="widget-title"><h3>最近の投稿</h3></div>		<ul>
					<li>
				<a href="../zspace用アプリケーションをunityで開発する/index.html">zSpace用アプリケーションをUnityで開発する</a>
						</li>
					<li>
				<a href="../unityでgear-vr用パススルーカメラアプリの作り方/index.html">UnityでGear VR用パススルーカメラアプリの作り方</a>
						</li>
					<li>
				<a href="../unity5でgear-vr用アプリの開発環境の設定/index.html">Unity5でGear VR用アプリの開発方法</a>
						</li>
					<li>
				<a href="../oculusかぶっている人の映像を外部の人と共有するovrmirror/index.html">Oculusかぶっている人の映像を外部の人と共有する(OVRMirrorの利用)</a>
						</li>
					<li>
				<a href="index.html">Kinect v2でスケルトン情報をオーバーレイ表示する方法(Unity)</a>
						</li>
				</ul>
		</div><div id="archives-2" class="widget-wrapper widget_archive"><div class="widget-title"><h3>アーカイブ</h3></div>		<ul>
	<li><a href='../../2015/07/index.html'>2015年7月</a></li>
	<li><a href='../../2015/05/index.html'>2015年5月</a></li>
	<li><a href='../../2015/04/index.html'>2015年4月</a></li>
	<li><a href='../../2015/03/index.html'>2015年3月</a></li>
	<li><a href='../../2015/02/index.html'>2015年2月</a></li>
	<li><a href='../../2015/01/index.html'>2015年1月</a></li>
	<li><a href='../../2014/12/index.html'>2014年12月</a></li>
	<li><a href='../../2014/11/index.html'>2014年11月</a></li>
	<li><a href='../../2014/10/index.html'>2014年10月</a></li>
		</ul>
</div><div id="categories-2" class="widget-wrapper widget_categories"><div class="widget-title"><h3>カテゴリー</h3></div>		<ul>
	<li class="cat-item cat-item-8"><a href="../../category/unity/blender/index.html" >Blender</a>
</li>
	<li class="cat-item cat-item-5"><a href="../../category/unity/kinect/index.html" >Kinect</a>
</li>
	<li class="cat-item cat-item-4"><a href="../../category/unity/leap-motion/index.html" >Leap motion</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../category/unity/oculus/index.html" >Oculus</a>
</li>
	<li class="cat-item cat-item-2"><a href="../../category/unity/index.html" >Unity</a>
</li>
	<li class="cat-item cat-item-6"><a href="../../category/その他/index.html" >その他</a>
</li>
	<li class="cat-item cat-item-14"><a href="../../category/サンプル/index.html" >サンプル</a>
</li>
		</ul>
</div><div id="text-5" class="widget-wrapper widget_text"><div class="widget-title"><h3>ブログランキング</h3></div>			<div class="textwidget"><a href="http://it.blogmura.com/unity/ranking_out.html" target="_blank"><img src="http://it.blogmura.com/unity/img/unity88_31.gif" width="88" height="31" border="0" alt="にほんブログ村 ＩＴ技術ブログ Unityへ" /></a><br /><a href="http://it.blogmura.com/unity/ranking_out.html" target="_blank">にほんブログ村</a>

<br>

<a href="http://blog.with2.net/link.php?1693602:1075" title="Unity ブログランキングへ"　target="_blank"><img src="http://image.with2.net/img/banner/c/banner_1/br_c_1075_1.gif" width="110" height="31" border="0" /></a><br /><a href="http://blog.with2.net/link.php?1693602:1075" style="font-size:12px;">Unity ブログランキングへ</a></div>
		</div><div id="widget_add_to_feedly" class="widget-wrapper widget_ADD_TO_FEEDLY"><a id="addtofeedly" href="http://cloud.feedly.com/#subscription/feed/" title="Follow on Feedly" target="_blank"><img src="http://psychic-vr-lab.com/blog/wp-content/plugins/add-to-feedly/images/addtofeedly_.png" alt="Follow on Feedly"/></a></div>
			</div><!-- end of #widgets -->
</div><!-- end of #wrapper -->
</div><!-- end of #container -->

<div id="footer" class="clearfix">
	
	<div id="footer-wrapper">

		
		<div class="grid col-940">

			<div class="grid col-540">
							</div><!-- end of col-540 -->

			<div class="grid col-380 fit">
				<ul class="social-icons"></ul><!-- .social-icons -->			</div><!-- end of col-380 fit -->

		</div><!-- end of col-940 -->
		
		<div class="grid col-300 copyright">
			&copy; 2015<a href="../../index.html" title="Psychic VRラボの殴り書き">
				Psychic VRラボの殴り書き			</a>
		</div><!-- end of .copyright -->

		<div class="grid col-300 scroll-top"><a href="index.html#scroll-top" title="トップへ戻る">&uarr;</a></div>

		<div class="grid col-300 fit powered">
			<a href="http://cyberchimps.com/responsive-theme/" title="Responsive テーマ">
				Responsive Theme</a>
			powered by <a href="http://wordpress.org/" title="WordPress">
				WordPress</a>
		</div><!-- end .powered -->

	</div><!-- end #footer-wrapper -->

	</div><!-- end #footer -->

	<div style="display:none">
	</div>
<script type='text/javascript' src='../../wp-content/plugins/akismet/_inc/form-ver=3.1.1.js'></script>
<script type='text/javascript' src='../../wp-content/plugins/contact-form-7/includes/js/jquery.form.min-ver=3.51.0-2014.06.20.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/psychic-vr-lab.com\/blog\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"\u9001\u4fe1\u4e2d ..."};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/contact-form-7/includes/js/scripts-ver=4.1.2.js'></script>
<script type='text/javascript' src='../../wp-content/plugins/lazy-load/js/jquery.sonar.min-ver=0.5.js'></script>
<script type='text/javascript' src='../../wp-content/plugins/lazy-load/js/lazy-load-ver=0.5.js'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201528'></script>
<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?ver=2015Julaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/jetpack/modules/wpgroho-ver=4.1.5.js'></script>
<script type='text/javascript' src='../../wp-content/themes/responsive/core/js/responsive-scripts.min-ver=1.2.6.js'></script>
<script type='text/javascript' src='../../wp-content/themes/responsive/core/js/jquery.placeholder.min-ver=2.0.7.js'></script>
<script type='text/javascript' src='../../wp-includes/js/comment-reply.min-ver=4.1.5.js'></script>
<script type='text/javascript' src='http://stats.wp.com/e-201528.js' async defer></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:3.5.3',blog:'77980396',post:'412',tz:'9',srv:'psychic-vr-lab.com'} ]);
	_stq.push([ 'clickTrackerInit', '77980396', '412' ]);
</script>
</body>
</html>